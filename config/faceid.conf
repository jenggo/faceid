# FaceID Configuration

[camera]
device = /dev/video0
width = 640
height = 480

[recognition]
# Threshold for face matching (lower = more strict, higher = more lenient)
# SFace recommended: 0.2-0.4 (cosine distance)
threshold = 0.3
# Timeout in seconds for authentication attempt
timeout = 5

[logging]
# Log file location
log_file = /var/log/faceid.log
# Log level: DEBUG, INFO, WARNING, ERROR
log_level = INFO

[authentication]
# Enable parallel face + fingerprint authentication
# First method to succeed will authenticate the user
enable_fingerprint = true
# Enable performance optimizations (caching, image preprocessing)
enable_optimizations = true
# Check lid state before attempting biometric authentication
# Biometrics will be skipped if lid is closed (falls through to password)
check_lid_state = true
# Check display state before attempting biometric authentication
# Biometrics will be skipped if display is off/blanked (falls through to password)
# This prevents camera/fingerprint from waking the device when screen is off
check_display_state = true

# Delay (in milliseconds) before starting biometric auth on lock screen
# This gives the screen time to turn off after pressing lock button (Meta+L)
# Recommended: 500-1500ms (1500ms = 1.5 seconds)
# Set to 0 to disable delay
lock_screen_delay_ms = 1000

# Number of frames to verify before authenticating
frame_count = 3

[security]
# Log authentication attempts
log_attempts = true

[ir_emitter]
# Enable IR emitter control
enabled = true

# Emitter device (usually same as camera)
device = /dev/video0

# Emitter control codes (device-specific)
# Leave empty for auto-detection
control_codes =

[presence_detection]
# Enable/disable presence detection service
enabled = true

# Time (in seconds) of inactivity before starting face scanning
# During active use (typing/mouse), NO scanning occurs (saves battery)
inactive_threshold_seconds = 15

# Interval (in seconds) between face scans when idle
scan_interval_seconds = 5

# Number of consecutive scan failures before confirming user is away
max_scan_failures = 2

# Maximum idle time (in minutes) before confirming user is away
# After this time, screen locks even if scans are inconclusive
max_idle_time_minutes = 15

# Mouse jitter filter threshold (in milliseconds)
# Input events faster than this are considered noise (desk bumps, etc.)
# Only movements separated by more than this threshold reset the idle timer
mouse_jitter_threshold_ms = 300

# Camera shutter detection thresholds
# Mean brightness below this value indicates closed shutter
shutter_brightness_threshold = 10.0

# Brightness standard deviation below this indicates uniform (closed) shutter
shutter_variance_threshold = 2.0

# Time (in minutes) to wait before locking if shutter is closed
# User may close shutter for privacy - don't immediately lock
# After this timeout, lock screen anyway for security
shutter_timeout_minutes = 5
